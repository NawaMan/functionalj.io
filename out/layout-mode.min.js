/* LayoutMode v0.0.1, @license MIT */
!function(e,n){"function"==typeof define&&define.amd?define(n):e.LayoutMode=n()}(this,function(){"use strict"
var e=function(e){return document.querySelectorAll(e)},n=window.addEventListener,t=JSON.stringify,r=function(e){return"function"==typeof e}
return{init:function(o,i,d,a){var l=document.body.classList,s=o.constructor!==Array,c=s?o:{},u=s?c.modes:o,v=(s?c.classPrefix:i)||"mode-",f=(s?c.selectorClass:d)||"css-layout-mode-selector",h=(s?c.divPrefix:a)||"mode-",y={},m="body > ."+f,p=function(){for(var n=[],t=e(m+" div"),r=0;r<t.length;r++){var o=t[r]
if("none"!==getComputedStyle(o,null).display){var i=o.textContent;-1==n.indexOf(i)&&n.push(i)}}return n.sort(),n},g=function(){for(var e=[],n=0;n<l.length;n++){var t=l[n]
0===t.indexOf(v)&&e.push(t.substr(v.length))}return e.sort(),e},E=function(){var e=p(),n=g()
if(n.length==e.length&&(0==n.length||n[0]==e[0])&&t(n)==t(e))return!1
for(var r=0;r<n.length;r++)l.remove(v+n[r])
for(var r=0;r<e.length;r++)l.add(v+e[r])
n=g()
for(var o in y)y[o](n)},b=function(n){for(var t=e(m+" div"),r=0;r<t.length;r++){var o=t[r],i=o.textContent
o.style.display=n.includes(i)?"block":"none"}E()},w=window.dispatchEvent,x=function(n){for(var t=e(m+" div"),o=0;o<t.length;o++){t[o].style.display=""}if(r(Event))w(new Event("resize"))
else{var i=document.createEvent("UIEvents")
i.initUIEvent("resize",!0,!1,window,0),w(i)}},C=function(e,n){var t=r(e)?"nn"+Math.random():e,o=r(n)?n:e
return y[t]=o,L},M=function(e){var n=null
if("string"==typeof e)n=e
else{var n=null
for(var t in y)callback===e&&(n=t)}return n||delete y[n],L}
!function(e){var n=document.createElement("div")
n.classList.add(f)
for(var t=0;t<u.length;t++){var r=u[t],o=document.createElement("div")
o.classList.add(h+r),o.innerText=r,n.appendChild(o)}var i=document.createElement("style")
i.innerText="body > ."+f+" { visibility: hidden; } \nbody > ."+f+" > div { display: none; }\n",n.appendChild(i),document.body.appendChild(n)}(),n("DOMContentLoaded",E),n("load",E),n("resize",E),E()
var L={currentModes:g,changeModes:b,clearModes:x,selector:m,watch:C,unwatch:M,updateMode:E}
return L}}})
